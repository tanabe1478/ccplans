@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
    --background: 210 40% 98%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    --primary: 221 83% 53%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 94%;
    --secondary-foreground: 222 47% 11%;
    --muted: 210 40% 94%;
    --muted-foreground: 215 16% 47%;
    --accent: 210 40% 94%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 221 83% 53%;
    --radius: 0.125rem;

    --ui-slate-950: 210 40% 98%;
    --ui-slate-900: 210 40% 96%;
    --ui-slate-800: 214 32% 91%;
    --ui-slate-700: 215 20% 84%;
    --ui-slate-100: 222 47% 11%;
    --ui-slate-200: 215 25% 27%;
    --ui-slate-300: 215 16% 47%;
    --ui-slate-400: 215 20% 40%;
    --ui-slate-500: 215 14% 50%;
    --ui-slate-600: 215 16% 58%;

    --scrollbar-track: 210 32% 94%;
    --scrollbar-thumb: 215 20% 72%;
    --scrollbar-thumb-hover: 215 20% 62%;

    --review-file-border: 214 32% 88%;
    --review-file-bg: 0 0% 100%;
    --review-header-border: 214 32% 88%;
    --review-header-text: 215 16% 47%;
    --review-row-border: 214 32% 90%;
    --review-row-comment-bg: 210 40% 96%;
    --review-row-select-bg: 210 40% 94%;
    --review-gutter-border: 214 32% 88%;
    --review-gutter-bg: 210 40% 97%;
    --review-gutter-text: 215 16% 47%;
    --review-gutter-hover-bg: 210 40% 94%;
    --review-gutter-hover-text: 215 25% 27%;
    --review-code-text: 222 47% 11%;
    --review-comment-cell-bg: 210 40% 97%;
  }

  .dark {
    color-scheme: dark;
    --background: 222 24% 8%;
    --foreground: 210 20% 92%;
    --card: 222 21% 11%;
    --card-foreground: 210 20% 92%;
    --popover: 222 21% 11%;
    --popover-foreground: 210 20% 92%;
    --primary: 203 88% 66%;
    --primary-foreground: 222 24% 8%;
    --secondary: 220 16% 17%;
    --secondary-foreground: 210 20% 90%;
    --muted: 220 17% 15%;
    --muted-foreground: 218 12% 62%;
    --accent: 220 17% 15%;
    --accent-foreground: 210 20% 92%;
    --destructive: 350 82% 65%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 15% 24%;
    --input: 220 15% 24%;
    --ring: 203 88% 66%;

    --ui-slate-950: 224 71% 4%;
    --ui-slate-900: 222 47% 11%;
    --ui-slate-800: 215 28% 17%;
    --ui-slate-700: 215 20% 27%;
    --ui-slate-100: 210 40% 98%;
    --ui-slate-200: 214 32% 91%;
    --ui-slate-300: 213 27% 84%;
    --ui-slate-400: 215 20% 65%;
    --ui-slate-500: 215 16% 47%;
    --ui-slate-600: 215 19% 35%;

    --scrollbar-track: 222 47% 11%;
    --scrollbar-thumb: 215 20% 27%;
    --scrollbar-thumb-hover: 215 16% 36%;

    --review-file-border: 215 28% 17%;
    --review-file-bg: 222 47% 11%;
    --review-header-border: 215 28% 17%;
    --review-header-text: 215 20% 65%;
    --review-row-border: 218 42% 14%;
    --review-row-comment-bg: 220 58% 12%;
    --review-row-select-bg: 215 28% 17%;
    --review-gutter-border: 215 28% 17%;
    --review-gutter-bg: 222 47% 11%;
    --review-gutter-text: 215 16% 47%;
    --review-gutter-hover-bg: 218 43% 14%;
    --review-gutter-hover-text: 213 27% 84%;
    --review-code-text: 214 95% 93%;
    --review-comment-cell-bg: 222 47% 11%;
  }
}

@layer base {
  * {
    @apply border-border;
    border-radius: 0;
  }

  html,
  body,
  #root {
    min-height: 100%;
  }

  body {
    @apply bg-background text-foreground;
    margin: 0;
    min-height: 100vh;
    font-family: "SF Pro Text", "Avenir Next", "Helvetica Neue", "IBM Plex Sans", sans-serif;
    font-size: 13px;
    line-height: 1.45;
    letter-spacing: 0.005em;
  }

  code,
  pre,
  kbd,
  samp {
    font-family: "JetBrains Mono", "SFMono-Regular", Menlo, Monaco, monospace;
  }
}

::-webkit-scrollbar {
  width: 9px;
  height: 9px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--scrollbar-track));
}

::-webkit-scrollbar-thumb {
  border: 2px solid hsl(var(--scrollbar-track));
  background: hsl(var(--scrollbar-thumb));
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--scrollbar-thumb-hover));
}

.markdown-content {
  @apply max-w-none text-foreground;
}

.markdown-content h1 {
  @apply mt-6 mb-3 border-b pb-2 text-xl font-semibold;
}

.markdown-content h2 {
  @apply mt-5 mb-2 text-lg font-semibold;
}

.markdown-content h3 {
  @apply mt-4 mb-2 text-base font-medium;
}

.markdown-content p {
  @apply my-2 leading-relaxed;
}

.markdown-content ul,
.markdown-content ol {
  @apply my-2 pl-6;
}

.markdown-content li {
  @apply my-1;
}

.markdown-content code {
  @apply bg-muted px-1.5 py-0.5 text-[12px] font-mono;
}

.markdown-content pre {
  @apply my-3 overflow-x-auto border border-border bg-muted p-3;
}

.markdown-content pre code {
  @apply bg-transparent p-0;
}

.markdown-content table {
  @apply my-3 w-full border-collapse;
}

.markdown-content th,
.markdown-content td {
  @apply border px-2 py-1.5 text-left;
}

.markdown-content th {
  @apply bg-muted font-medium;
}

.markdown-content blockquote {
  @apply my-3 border-l-2 border-muted pl-3 italic;
}

.markdown-content a {
  @apply text-primary underline;
}

.section-nav {
  @apply border bg-card p-2;
}

.section-nav-item {
  @apply block px-2 py-1 text-[12px] transition-colors;
}

.section-nav-item:hover {
  @apply bg-muted;
}

.markdown-content [id] {
  scroll-margin-top: 0.75rem;
}

.review-file {
  border: 1px solid hsl(var(--review-file-border));
  background: hsl(var(--review-file-bg));
}

.review-file-header {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  border-bottom: 1px solid hsl(var(--review-header-border));
  padding: 8px 10px;
  font-size: 11px;
  color: hsl(var(--review-header-text));
}

.review-file-content {
  max-height: 64vh;
  overflow: auto;
}

.review-diff-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

.review-diff-line {
  border-bottom: none;
}

.review-diff-line.has-comment {
  background: hsl(var(--review-row-comment-bg));
}

.review-diff-line.selecting {
  background: hsl(var(--review-row-select-bg));
}

.review-diff-gutter {
  width: 56px;
  cursor: pointer;
  border-right: 1px solid hsl(var(--review-gutter-border));
  background: hsl(var(--review-gutter-bg));
  padding: 0;
  color: hsl(var(--review-gutter-text));
}

.review-diff-gutter:hover {
  background: hsl(var(--review-gutter-hover-bg));
  color: hsl(var(--review-gutter-hover-text));
}

.review-line-num {
  display: inline-flex;
  width: 100%;
  align-items: center;
  justify-content: center;
  padding: 4px 0;
  font-size: 11px;
  font-family: "JetBrains Mono", "SFMono-Regular", Menlo, Monaco, monospace;
}

.review-add-btn {
  display: none;
}

.review-diff-code {
  padding: 4px 8px;
  white-space: pre-wrap;
  font-size: 12px;
  font-family: "JetBrains Mono", "SFMono-Regular", Menlo, Monaco, monospace;
  color: hsl(var(--review-code-text));
}

.review-comment-row {
  border-bottom: none;
}

.review-comment-cell {
  padding: 6px 8px;
  background: hsl(var(--review-comment-cell-bg));
}

.electron-drag-region {
  -webkit-app-region: drag;
}

.electron-no-drag {
  -webkit-app-region: no-drag;
}

/* Theme bridge for existing slate-based utility classes */
.bg-slate-950 {
  background-color: hsl(var(--ui-slate-950));
}

.bg-slate-950\/45 {
  background-color: hsl(var(--ui-slate-950) / 0.45);
}

.bg-slate-950\/95 {
  background-color: hsl(var(--ui-slate-950) / 0.95);
}

.bg-slate-900 {
  background-color: hsl(var(--ui-slate-900));
}

.bg-slate-900\/50 {
  background-color: hsl(var(--ui-slate-900) / 0.5);
}

.bg-slate-900\/60 {
  background-color: hsl(var(--ui-slate-900) / 0.6);
}

.bg-slate-900\/70 {
  background-color: hsl(var(--ui-slate-900) / 0.7);
}

.bg-slate-900\/80 {
  background-color: hsl(var(--ui-slate-900) / 0.8);
}

.bg-slate-800 {
  background-color: hsl(var(--ui-slate-800));
}

.bg-slate-800\/40 {
  background-color: hsl(var(--ui-slate-800) / 0.4);
}

.bg-slate-800\/70 {
  background-color: hsl(var(--ui-slate-800) / 0.7);
}

.bg-slate-700 {
  background-color: hsl(var(--ui-slate-700));
}

.border-slate-900,
.border-slate-800,
.border-slate-700,
.border-slate-600 {
  border-color: hsl(var(--border));
}

.text-slate-100 {
  color: hsl(var(--ui-slate-100));
}

.text-slate-200 {
  color: hsl(var(--ui-slate-200));
}

.text-slate-300 {
  color: hsl(var(--ui-slate-300));
}

.text-slate-400 {
  color: hsl(var(--ui-slate-400));
}

.text-slate-500 {
  color: hsl(var(--ui-slate-500));
}

.text-slate-600 {
  color: hsl(var(--ui-slate-600));
}

.hover\:bg-slate-900:hover {
  background-color: hsl(var(--ui-slate-900));
}

.hover\:bg-slate-800:hover {
  background-color: hsl(var(--ui-slate-800));
}

.hover\:bg-slate-800\/40:hover {
  background-color: hsl(var(--ui-slate-800) / 0.4);
}

.hover\:bg-slate-800\/70:hover {
  background-color: hsl(var(--ui-slate-800) / 0.7);
}

.hover\:text-slate-200:hover {
  color: hsl(var(--ui-slate-200));
}

.placeholder\:text-slate-500::placeholder {
  color: hsl(var(--ui-slate-500));
}
